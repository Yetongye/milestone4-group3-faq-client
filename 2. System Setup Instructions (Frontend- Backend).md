# 2. System Setup Instructions (Frontend, Backend, Database)

## Table of Contents

1. [Prerequisites](#prerequisites "Prerequisites")
2. [Database Setup](#database-setup "Database Setup")
3. [Backend Setup](#backend-setup "Backend Setup")
4. [Frontend Setup](#frontend-setup "Frontend Setup")
5. [Configuration](#configuration "Configuration")
6. [Build and Deployment](#build-and-deployment "Build and Deployment")
7. [Validation](#validation "Validation")



## Prerequisites

### 1. Operating System

- **Supported OS**: Windows 10+, macOS 10.15+, Ubuntu 18.04+
- **Architecture**: x64 (64-bit)

### 2. Required Software

#### (1) Node.js and npm

- **Version**: Node.js 16.0+ (LTS recommended)
- **Download**: [https://nodejs.org/](https://nodejs.org/ "https://nodejs.org/")
- **Verification**:
  ```bash 
  node --version  # Should show v16.0.0 or higher
  npm --version   # Should show 8.0.0 or higher
  ```


#### (2) Python

- **Version**: Python 3.8+ (3.9+ recommended)
- **Download**: [https://python.org/downloads/](https://python.org/downloads/ "https://python.org/downloads/")
- **Verification**:
  ```bash 
  python --version  # Should show Python 3.8.0 or higher
  pip --version     # Should show pip 21.0 or higher
  ```


#### (3) Git

- **Version**: Git 2.25+
- **Download**: [https://git-scm.com/downloads](https://git-scm.com/downloads "https://git-scm.com/downloads")
- **Verification**:
  ```bash 
  git --version  # Should show git version 2.25.0 or higher
  ```


### 3. Cloud Services

#### PostgreSQL Database

**Option 1: Railway PostgreSQL (Recommended)**

- Railway account required
- PostgreSQL 12+ database instance
- SSL connection enabled

**Option 2: Local PostgreSQL**

- PostgreSQL 12+ installed locally
- Download: [https://postgresql.org/download/](https://postgresql.org/download/ "https://postgresql.org/download/")

#### OpenAI API (Optional but Recommended)

- OpenAI account with API access
- API key from [https://platform.openai.com/api-keys](https://platform.openai.com/api-keys "https://platform.openai.com/api-keys")
- GPT-3.5-turbo or GPT-4 access



## Database Setup

### Option 1: Railway PostgreSQL (Recommended)

#### Step 1: Create Railway PostgreSQL Database

1. Log in to Railway ([https://railway.app](https://railway.app "https://railway.app"))
2. Create a new project
3. Add PostgreSQL service from the service catalog
4. Configure:
   - **Database name**: `faq_system`
   - **Version**: PostgreSQL 12 or higher
   - Railway will automatically generate connection credentials

#### Step 2: Get Connection Details

1. Go to your PostgreSQL service in Railway dashboard
2. Navigate to "Variables" tab
3. Copy the DATABASE_URL or individual connection parameters:
   - **Host**: Provided by Railway
   - **Port**: Usually 5432
   - **Database**: Your database name
   - **Username**: Auto-generated
   - **Password**: Auto-generated

#### Step 3: Database is Ready

```sql 
-- Railway PostgreSQL comes with the database already created
-- You can connect directly using the provided DATABASE_URL
```


### Option 2: Local PostgreSQL Setup

#### Step 1: Install PostgreSQL

**Windows:**

1. Download installer from [https://postgresql.org/download/windows/](https://postgresql.org/download/windows/ "https://postgresql.org/download/windows/")
2. Run installer and follow setup wizard
3. Remember the superuser password

**macOS:**

```bash 
# Using Homebrew
brew install postgresql
brew services start postgresql
```


**Ubuntu:**

```bash 
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
```


#### Step 2: Create Database and User

```bash 
# Switch to postgres user
sudo -u postgres psql

# Create database and user
CREATE DATABASE faq_system;
CREATE USER faquser WITH PASSWORD 'your_secure_password';
GRANT ALL PRIVILEGES ON DATABASE faq_system TO faquser;
\q
```




## Backend Setup

### Step 1: Clone Repository

```bash 
git clone https://github.com/Yetongye/milestone4-group3-faq-client.git
cd milestone4-group3-faq-client
```


### Step 2: Create Python Virtual Environment

```bash 
# Navigate to backend directory
cd faq-backend

# Create virtual environment
python -m venv venv

# Activate virtual environment
# Windows:
venv\Scripts\activate
# macOS/Linux:
source venv/bin/activate
```


### Step 3: Install Dependencies

```bash 
# Ensure you're in faq-backend directory with activated venv
pip install --upgrade pip
pip install -r requirements.txt
```


### Step 4: Environment Configuration

```bash 
# Copy environment template
cp .env.example .env

# Edit .env file with your configuration
# Use your preferred text editor
nano .env  # or code .env, vim .env, etc.
```


### Step 5: Configure Environment Variables

Edit `.env` file with your specific values:

```text 
# Database Configuration
# For Railway PostgreSQL, use the auto-generated DATABASE_URL
# Local development:
DATABASE_URL=postgresql://username:password@hostname:5432/database_name?sslmode=require
# Railway production (auto-injected):
# DATABASE_URL=${{PostgreSQL.DATABASE_URL}}

# OpenAI Configuration (Optional)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Flask Configuration
FLASK_ENV=development
FLASK_DEBUG=True
SECRET_KEY=your-super-secret-key-change-in-production

# AI Service Configuration
AI_SIMILARITY_THRESHOLD=0.3
AI_MAX_TOKENS=500
AI_TEMPERATURE=0.7
```


### Step 6: Test Database Connection

```bash 
# Test PostgreSQL connection
python test_postgresql_connection.py

# Expected output:
# ✅ Database connection successful
# ✅ All tables created successfully
# ✅ Basic CRUD operations working
```




## Frontend Setup

### Step 1: Navigate to Frontend Directory & Step 2: Install Dependencies

```bash 
# From project root
cd faq-frontend
# Install all npm packages
npm install

```


### Step 3: Verify Installation

```bash 
# Check if all dependencies are installed
npm list --depth=0

# Should show all packages from package.json
```




## Configuration

### Backend Configuration Files

#### 1. [config.py](http://config.py "config.py")

The main configuration file that loads environment variables:

- Database connection settings
- OpenAI API configuration
- Flask application settings
- AI service parameters

#### 2. .env File Structure

```text 
# Required: Database Configuration
DATABASE_URL=postgresql://user:pass@host:5432/dbname?sslmode=require

# Optional: OpenAI API (enables AI features)
OPENAI_API_KEY=sk-your-api-key

# Required: Flask Security
SECRET_KEY=your-secret-key-minimum-32-characters

```


### Frontend Configuration

#### 1. API Endpoint Configuration

The frontend automatically connects to `http://localhost:5000` for the backend API.

For Railway production deployment, update API endpoints in:

- `src/api/` directory files
- Replace `localhost:5000` with your Railway backend URL (e.g., `https://your-app-name.up.railway.app`)

### Security Configuration

#### 1. Secrets Management

**Development:**

- Store secrets in `.env` file (never commit to git)
- Use strong, unique passwords
- Generate secure SECRET\_KEY: `python -c "import secrets; print(secrets.token_hex(32))"`

**Production:**

- Use environment variables or cloud secret management
- Railway Environment Variables (for Railway deployments)
- Never hardcode secrets in source code

#### 2. Database Security

- Enable SSL connections (`sslmode=require`)
- Use strong database passwords
- Restrict database access to application IPs only
- Regular security updates



## Build and Deployment

### Development Environment

#### 1. Start Backend Server

```bash 
# In faq-backend directory with activated virtual environment
python app.py

# Expected output:
# * Running on http://127.0.0.1:5000
# * Debug mode: on
```


#### 2. Start Frontend Development Server

```bash 
# In faq-frontend directory
npm start

# Expected output:
# Compiled successfully!
# Local:            http://localhost:3000
# On Your Network:  http://192.168.x.x:3000
```


#### 3. Access Application

- **Frontend**: [http://localhost:3000](http://localhost:3000 "http://localhost:3000")
- **Backend API**: [http://localhost:5000](http://localhost:5000 "http://localhost:5000")
- **API Documentation**: [http://localhost:5000/api](http://localhost:5000/api "http://localhost:5000/api") (if available)

### Production Deployment

#### Railway Deployment (Recommended)

#### Prerequisites for Railway Deployment

1. Create a Railway account at [https://railway.app](https://railway.app "https://railway.app")
2. Connect your GitHub account to Railway
3. Push your code to a GitHub repository

#### 1. Frontend Deployment

```bash 
# In faq-frontend directory
npm run build

# Deploy to Railway:
# 1. Connect your GitHub repository to Railway
# 2. Railway will automatically detect and build your React app
# 3. Set build command: npm run build
# 4. Set start command: npx serve -s build
```


#### 2. Backend Deployment

```bash 
# Create railway.json in your backend directory
{
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "gunicorn -w 4 -b 0.0.0.0:$PORT app:app",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}

# Set environment variables in Railway dashboard:
# FLASK_ENV=production
# FLASK_DEBUG=False
# SECRET_KEY=your-production-secret-key
# DATABASE_URL=postgresql://... (auto-provided by Railway PostgreSQL)
```

#### 3. Complete Railway Deployment Steps

**Step 1: Deploy Database**
1. Create new Railway project
2. Add PostgreSQL service from template
3. Note the generated DATABASE_URL

**Step 2: Deploy Backend**
1. Connect your backend repository to Railway
2. Add environment variables in Railway dashboard
3. Railway will automatically build and deploy

**Step 3: Deploy Frontend**
1. Connect your frontend repository to Railway
2. Set build command: `npm run build`
3. Set start command: `npx serve -s build`
4. Update API endpoints to point to your Railway backend URL

**Step 4: Configure Domain (Optional)**
1. Railway provides a default domain
2. You can add a custom domain in the Railway dashboard


#### 3. Environment-Specific Settings

**Development:**

```text 
FLASK_ENV=development
FLASK_DEBUG=True
DATABASE_URL=postgresql://localhost/faq_dev
```


**Railway Staging:**

```text 
FLASK_ENV=staging
FLASK_DEBUG=False
DATABASE_URL=${{PostgreSQL.DATABASE_URL}} # Railway auto-injected
```


**Railway Production:**

```text 
FLASK_ENV=production
FLASK_DEBUG=False
DATABASE_URL=${{PostgreSQL.DATABASE_URL}} # Railway auto-injected
PORT=${{RAILWAY_PORT}} # Railway auto-injected
```




## Validation

### 1. Backend Validation

#### Database Connection Test

```bash 
# In faq-backend directory
python test_postgresql_connection.py

# Expected output:
# ✅ PostgreSQL connection successful
# ✅ Database tables created successfully
# ✅ Sample data operations working
# ✅ All tests passed!
```


#### API Endpoints Test

```bash 
# Test basic API functionality
python test_api.py

# Expected output:
# ✅ GET /api/faqs - Working
# ✅ POST /api/chat - Working
# ✅ All API tests passed!
```


#### AI Service Test

```bash 
# Test AI integration (requires OpenAI API key)
python test_ai_service.py

# Expected output:
# ✅ AI service initialized
# ✅ Similarity matching working
# ✅ OpenAI API connection successful (if configured)
```


### 2. Frontend Validation

#### Build Test

```bash 
# In faq-frontend directory
npm run build

# Expected output:
# Compiled successfully.
# File sizes after gzip:
#   [file size information]
# The build folder is ready to be deployed.
```


#### Component Test

```bash 
# Run frontend tests
npm test

# Expected output:
# PASS src/App.test.js
# Test Suites: 1 passed, 1 total
# Tests: 1 passed, 1 total
```


### 3. Integration Validation

#### Full System Test

1. **Start Backend**: `python app.py` (should show "Running on [http://127.0.0.1:5000](http://127.0.0.1:5000 "http://127.0.0.1:5000")")
2. **Start Frontend**: `npm start` (should open [http://localhost:3000](http://localhost:3000 "http://localhost:3000"))
3. **Test Chat Function**:
   - Open browser to [http://localhost:3000](http://localhost:3000 "http://localhost:3000")
   - Navigate to chat interface
   - Send a test message: "How do I reset my password?"
   - Verify response is received
4. **Test Admin Functions**:
   - Access FAQ management interface
   - Add a new FAQ entry
   - Verify it appears in the system

#### API Integration Test

```bash 
# Test complete keyword integration
python test_keyword_integration.py

# Expected output:
# ✅ Keyword extraction integration test
# ✅ Server connection successful
# ✅ Chat API working with keyword extraction
# ✅ Statistics API working
# ✅ All integration tests passed!
```


